# D4 1219 길찾기
#..실패
def path(next, end):
    global check
    if next == end:
        check = 1
        return
    elif next == -1:
        return
    # if A[next] != 0:
    for i in range(2):
        if A[next][i] != -1:
            next = A[next][i]
            path(next, end)


#[[13, 1], [4, -1], [11, 7], [12, 10], [13, 14], [9, 12], [9, -1], [14, -1], [12, 19], [13, -1], [19, -1], [15, -1], [21, 18], [19, 23], [17, 22], [18, 19], [23, -1], [19, 26], [22, 28], [25, 22], [23, -1], [26, 25], [23, 25], [32, 31], [26, -1], [33, -1], [31, -1], [32, 33], [36, 37], [36, 37], [31, 39], [41, -1], [40, 37], [34, 36], [38, -1], [41, -1], [45, 39], [46, 44], [42, -1], [47, -1], [47, 46], [45, -1], [43, 49], [51, 45], [48, 53], [50, -1], [47, 49], [54, -1], [53, 59], [53, 55], [58, -1], [61, 54], [57, -1], [61, -1], [58, 63], [59, 60], [66, 59], [66, -1], [59, -1], [64, -1], [67, 69], [68, -1], [71, 65], [69, -1], [73, -1], [75, 68], [74, -1], [75, -1], [76, -1], [77, -1], [73, -1], [80, -1], [75, -1], [82, 80], [79, -1], [85, 86], [82, -1], [79, 86], [82, 81], [80, 88], [89, -1], [88, -1], [90, -1], [92, -1], [88, -1], [95, 90], [91, -1], [91, 94], [92, -1], [90, -1], [91, 95], [-1, -1], [96, -1], [-1, -1], [98, -1], [97, 99], [-1, -1], [-1, -1], [-1, -1], [-1, -1]]


for _ in range(1):
    tc, N = map(int, input().split())

    pair = list(map(int, input().split()))
    A = [[-1, -1] for _ in range(100)]

    for i in range(0, len(pair), 2):
        if A[pair[i]][0] == -1:
            A[pair[i]][0] = pair[i+1]
        else:
            A[pair[i]][1] = pair[i+1]
    print(A)
    check = 0
    path(0, 99)          # 0 : start, 99 : end
    print('#{} {}'.format(tc, check))



